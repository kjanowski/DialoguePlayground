<!DOCTYPE html>
<html>
<!--
	Copyright Kathrin Janowski (https://www.kathrinjanowski.com/en/home), 2021.
  
	This program is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<head>
<title>Dialogue Playground</title>
<link rel="stylesheet" type="text/css" href="../style/DialogueManager.css">
<link rel="stylesheet" type="text/css" href="../style/CustomAgent.css">
</head>
<script src="../script/CustomEngine.js"></script>
<script src="../script/DialogueManager.js"></script>
<body>
<div class="page">
	<div class="tabPanel" id="flowViewerTab">
		<button class="help-button" type="button" onclick="toggleVisibility('help-flow');"><span class="icon icon-help"/></button>
		<div class="help-popup" id="help-flow" style="visibility:hidden;">Hier werden die verschiedenen Themen und ihre Verbindungen angezeigt. Klicke auf einen Kasten, um das Thema auszuwählen.</div>
		<div class="viewport">
			<svg id="flowViewer"></svg>
		</div>
			
		<div class="panel" id="importExportPanel">
			<button type="button" id="importButton" onclick="importDialogueData();"><span class="icon icon-import button-caption">importieren</span></button>
			<button type="button" id="exportButton" onclick="exportDialogueData();"><span class="icon icon-export button-caption">exportieren</span></button>
			<button class="help-button" type="button" onclick="toggleVisibility('help-data');"><span class="icon icon-help"/></button>
			<div class="help-popup" id="help-data" style="visibility:hidden;">Dieses Feld dient dazu, den Dialog in eine Textdatei zu kopieren, oder umgekehrt. Mit "importieren" wird der aktuelle Dialog durch die Daten im Feld ersetzt. Mit "exportieren" werden die Daten des aktuellen Dialogs in das Feld geschrieben.</div>
			<textarea id="dialogueData" rows="10" cols="100"></textarea>
		</div>
	</div>
	<div class="tabPanel" id="toolshelf">
		<button type="button" class="add-button" onclick="addTopic();"><span class="icon icon-add button-caption">neues Thema</span></button>
		<form id="topicEditor">
			<div class="accordion" id="accordionAppearance">
				<div class="caption" id="accordionAppearance_caption" onclick="toggleExpansion('accordionAppearance');">▼ Darstellung</div>
				<div class="content" id="accordionAppearance_content" style="display:none;">
					<div class="panel">
						<label for="topicName">Name:</label>
						<input type="text" id="topicName" value="neues Thema"/>
					</div>
					<div class="panel">
						<label>Knoten-Position:</label>
						<br>
						<label for="topicX">X:</label>
						<input class="coordinates" type="number" id="topicX" value="10"/>
						<label for="topicY">Y:</label>
						<input class="coordinates" type="number" id="topicY" value="10"/>
						<button class="help-button" type="button" onclick="toggleVisibility('help-topicAppearance');"><span class="icon icon-help"/></button>
						<div class="help-popup" id="help-topicAppearance" style="visibility:hidden;">Der Name und die Position bestimmen, wie und wo der Knoten dargestellt wird.</div>
					</div>
				</div>
			</div>
			<div class="accordion" id="accordionAction">
				<div class="caption" id="accordionAction_caption" onclick="toggleExpansion('accordionAction');">▼ Verhalten</div>
				<div class="content" id="accordionAction_content" style="display:none;">
					<div class="panel">	
						<label for="topicEmotion">Emotion:</label>
						<select id="topicEmotion" value="">
							<option value="">neutral</option>
							<option value="emot_happy">fröhlich</option>
							<option value="emot_sad">traurig</option>
							<option value="emot_angry">wütend</option>
							<option value="emot_scared">ängstlich</option>
							<option value="emot_surprised">überrrascht</option>
							<option value="emot_disgusted">angeekelt</option>
						</select>
					</div>
					<div class="panel">
						<label for="topicMovement">Bewegung:</label>
						<select id="topicMovement" value="">
							<option value="">---</option>
							<option value="LookLeft">nach links schauen</option>
							<option value="LookRight">nach rechts schauen</option>
							<option value="Yes">ja</option>
							<option value="No">nein</option>
							<option value="PointLeft">links zeigen</option>
							<option value="PointRight">rechts zeigen</option>
						</select>
					</div>
					<div class="panel">
						<label for="topicQuestion">Frage:</label>
						<input type="text" id="topicQuestion" value="Wie geht es dir?"/>
						<button class="help-button" type="button" onclick="toggleVisibility('help-topicAction');"><span class="icon icon-help"/></button>
						<div class="help-popup" id="help-topicAction" style="visibility:hidden;">Hier wird festgelegt, was die Figur sagt und tut.</div>
					</div>
				</div>
			</div>
			<div class="accordion" id="accordionAnswers">
				<div class="caption" id="accordionAnswers_caption" onclick="toggleExpansion('accordionAnswers');">▼ Nutzer-Reaktion</div>
				<div class="content" id="accordionAnswers_content" style="display:none;">
					<div class="panel">
						<label for="topicVariable">abgefragte Variable:</label>
						<input type="text" id="topicVariable" value="Antwort"/>
					</div>
					<div class="panel">
						<label for="topicAnswers">Antworten:</label>
						<br>
						<div class="panel">
							<div id="topicAnswers"></div>
							<button class="add-button" type="button" onclick="addAnswer();"><span class="icon icon-add button-caption">neue Antwort</span></button>
							<button class="help-button" type="button" onclick="toggleVisibility('help-topicAnswers');"><span class="icon icon-help"/></button>
							<div class="help-popup" id="help-topicAnswers" style="visibility:hidden;">Hier wird festgelegt, was du der Figur antworten kannst. Jede Antwort hat einen Text und einen Wert, welcher der abgefragtren Variable zugewiesen wird.</div>
						</div>
					</div>
					
				</div>
			</div>
			<div class="accordion" id="accordionTransitions">
				<div class="caption" id="accordionTransitions_caption" onclick="toggleExpansion('accordionTransitions');">▼ Übergänge</div>
				<div class="content" id="accordionTransitions_content" style="display:none;">
					<div class="panel">
						<div id="topicTransitions"></div>
						<button class="add-button" type="button" onclick="addTransition();"><span class="icon icon-add button-caption">neuer Übergang</span></button>
						<button class="help-button" type="button" onclick="toggleVisibility('help-topicTransitions');"><span class="icon icon-help"/></button>
						<div class="help-popup" id="help-topicTransitions" style="visibility:hidden;">Hier wird festgelegt, wohin das Gespräch als nächstes führt. Dazu werden die Variablen geprüft, welche zuvor abgefragt wurden.
						</div>
					</div>
				</div>
			</div>
			<button type="button" class="save-button" onclick="saveTopic();"><span class="icon icon-yes button-caption">Thema speichern</span></button>
			<button type="button" class="delete-button" onclick="deleteTopic();"><span class="icon icon-delete button-caption">Thema löschen</span></button>
		</form>
	</div>
		
	<div id="agentPanel">
		<div id="webglcontainer"></div>
		<script>
			initAgent(webglcontainer);
		</script>
		<div class="panel" id="playControls">
			<button type="button" id="playAll" onclick="playAll();"><span class="icon icon-play-all button-caption">von Anfang</span></button>
			<button type="button" id="playTopic" onclick="play();"><span class="icon icon-play-here button-caption">von hier</span></button>
			<button type="button" id="stop" onclick="stop();"><span class="icon icon-stop button-caption">Stop</span></button>
			<br>
			<div id="voiceSelection">
				<button type="button" onclick="updateVoiceSelect();"><span class="icon button-caption">Stimmen laden</span></button>
			</div>
		</div>		
		<div id="answerOptions"></div>
		
	</div>
</div>
<div id="about-panel">
	<div id="about-text">
		Dieser Dialog-Editor wurde entwickelt von <a href="https://www.uni-augsburg.de/de/fakultaet/fai/informatik/prof/hcm/team/kathrin-janowski/" target="_blank">Kathrin Janowski</a>, zur Verwendung für den
		<a href="https://www.girls-day.de/" target="_blank">Girls' Day</a> 2021.
		<br>
		Der Quellcode für den Editor ist verfügbar auf GitHub: <a href="https://github.com/kjanowski/DialoguePlayground" target="_blank">Dialogue Playground</a>
	</div>
	<div id="about-trigger">
		Über diesen Editor... 
	</div>
</div> 
</body>
</html>
